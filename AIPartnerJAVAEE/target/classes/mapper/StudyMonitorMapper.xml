<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.aipartner.mapper.StudyMonitorMapper">

    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        insert into db_aipartner.study_monitor (
            total_time, sleep_time, study_time, walk_time, phone_time, attention_time,
            dev_id, study_ratio, sleep_radio, attention_radio
        ) values (
            #{totalTime}, #{sleepTime}, #{studyTime}, #{walkTime}, #{phoneTime}, #{attentionTime},
            #{devId}, #{studyRatio}, #{sleepRadio}, #{attentionRadio}
        )
    </insert>

    <select id="findLatestByDevId" resultType="com.example.aipartner.pojo.monitor.StudyMonitor">
        select * from db_aipartner.study_monitor where dev_id = #{devId} order by id desc limit 1
    </select>

    <update id="update">
        update db_aipartner.study_monitor
        set total_time = #{totalTime},
            sleep_time = #{sleepTime},
            study_time = #{studyTime},
            walk_time = #{walkTime},
            phone_time = #{phoneTime},
            attention_time = #{attentionTime},
            study_ratio = #{studyRatio},
            sleep_radio = #{sleepRadio},
            attention_radio = #{attentionRadio}
        where id = #{id}
    </update>

    <delete id="deleteByDevId">
        delete from db_aipartner.study_monitor where dev_id = #{devId}
    </delete>

</mapper>